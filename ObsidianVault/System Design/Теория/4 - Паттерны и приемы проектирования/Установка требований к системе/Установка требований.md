#SystemDesign 

### Функциональные требования -
Заявление о том, как должна вести себя система. Оно определяет, что система должна делать, чтобы удовлетворить потребности или ожидания пользователя. Функциональные требования можно рассматривать как функции, которые обнаруживает пользователь

### Нефункциональные требования - 
Требования, определяющие свойства, которые система должна демонстрировать, или ограничения, которые она должна соблюдать, не относящиеся к поведению системы. Например, производительность, удобство сопровождения, расширяемость, надежность

## Примеры:

### Whatsapp
Функциональные требования:
- личные сообщения и чаты поддерживаем
- прочитанность сообщений поддерживаем
- в сообщениях поддерживаем только текст
- поддерживаем уведомления пользователей о сообщениях
- поддерживаем статусы пользователей (онлайн \ оффлайн)

Нефункциональные требования:
- DAU 100 000 000 = Daily Active Users = количество уникальных пользователей в 1 день
- Avaliability 99,95%
- Responce time на отправку 1 секунда
- Responce time на получение сообщения 5 секунд
- Максимальный размер сообщения 1000 символов
- Максимальное количество пользователей в чате 1000
- Поддерживаем пока только пользователей из СНГ (распределенность)
- В среднем пользователь читает 10 раз сообщения в день
- В среднем пишет 2 сообщения в день
- Сообщения храним всегда

Расчет нагрузки:
- RPS (read) = 100 00 000 * 10 / 86400 = 11574 r/s (кол-во уникальных пользователей * количество чтений сообщений / 24ч / 60мин / 60 сек)
- RPS (write) = 11574 / 5 = 2314 r/s

- Traffic per secjnd (write) = 2314 * 2000 = 4 628 000 bytes/s = 4 mb/s (так как русские символы и лимит 1000 то 2byte * 1000)
- Traffic per day (write) = 4 * 86400 = 34560 mb/day = 345 gb/day
- Traffic per year (write) = 345 * 365 = 125925 = 125 tb

- Initial storage capacity = 200 TB
- Initial storage capacity with replication and backups = 500 TB

- Number of XXX disks with replication = 84 (6TB на диск норма на 2024 год) (Определяем тип диска (XXX) в зависимости от необходимой пропускной способности [[Пропускная способность дисков]])
- Number of shards(количество хостов с БД) = 6 with 2 factor replication (84 / 2реплики / 8дисков в полке)

>[!info]- Быстрый перевод
>1 000 = KB
>1 000 000 = MB
>1 000 000 000 = GB

>[!info]- Как понять нужны ли шарды?
> 1. Если у нам надо много дискового пространства (больше 8 дисков в 1 полку не лезет)
> 2. Если высокий RPS
> 3. Если большой поток данных