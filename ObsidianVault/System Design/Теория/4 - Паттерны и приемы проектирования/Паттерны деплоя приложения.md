#SystemDesign 

### 1. Rolling Release

Мы поднимаем рядом со старой версией приложения новую в отдельном инстансе, пускаем трафик сразу на все версии, после чего выключаем старую версию. Повторяем этот процесс постепенно, пока все инстансы приложения не будут обновлены(можно добавлять и выключать по 1,2,3 инстанса в зависимости от настройки). 

[[rolling-release.png]]

Так же можно сначала выключать инстанс со старой версией, а после добавлять новый и пускать на него трафик.

### 2. Blue/Green Release

Мы всегда имеем две зарезервированных инсталляции(blue и green). На 1 инсталляции у нас стоит blue версия кода и идет трафик, на 2 green версия кода и трафик не идет, то есть рабочие машинки стоят в холостую. Когда мне надо задеплоить новую версию кода, я накатываю ее на стоящую в холостую инсталляцию, а после переключаю трафик на эту инсталляцию

[[blue-gree-release.png]]

### 3. Canary Release

Мы поднимаем новую версию приложения на каких-то инстансах и пускаем туда какой-то небольшой процент трафика. После чего смотрит "жива ли канарейка", если все хорошо мы увеличиваем процент трафика и тд. Таким образом мы постепенно раскатываем новую доработку( особенно актуально для сложных доработок в хайлоад системах)

[[canary-release.png]]