#SystemDesign 

1. *Клиентская балансировка* - клиент знает о всех инстансах обработки информации куда ему нужно идти и сам будет балансировать нагрузку. При добавлении новых узлов надо обновлять кодовую базу клиента, зато при таком подходе ниже задержки, так как нет промежуточного узла
	[[Client-Load-Balancing]]
2. *Серверная балансировка* - между клиентом и инстансами ставится балансировщик нагрузки, который будет отвечать за распределение запросов по инстансам. 
	Алгоритмы работы балансировщика:
	- [[Random-balancing]]
	- [[Round-Robin-balancing]] - балансировщик по кругу распределяет задачи(по порядку, по зигзагам - неважно)
	- [[Weighted-RR]] - взвешенный roud robin, добавляем "вес" инстансам для увеличения нагрузки на более мощный сервер
	- [[Sticky-Session]] - на балансировщике хешируется user_id и по остатку от деления hash-кода выбирается инстанс(в ситуации когда в инстансах хранится кеш по каждому пользователю)
	- Least Connections / Least Response Time / Least Bandwidth - балансировщик смотрит, где меньше открытых соединений, где меньше время ответа, где больше пропускная способность(чаще всего используются 1 и 2)
	- Power of two choices - случайным образом выбираем два бэкэнда из списка - из этих двух выбираем лучший по целевой метрике (least connections / sessions / ...)
	- [[L4-L7-Balancer]] (так же называют Network loadbalancer и Application loadbalancer)
		- L4 - не умеем понимать сколько запросов от клиента поступает, просто пробрасывает через себя коннекшн к серверу(новый клиент новый коннекшн). L4 просто проксирует трафик, это проще и быстрее.
		- L7 - может открыть несколько коннекшенов и раскидывать запросы по нескольким серверам в зависимости от потока запросов от клиентов
	- [[DNS-Balancing]](Domain Name System) -  позволяет равномерно распределять запросы по нескольким сервера при запросе к домену(балансировка перед балансировщиком). Прячем за одним доменным именем несколько инстансов приложения
	- [[geoDNS-Balancing]] - распределение апишников по их географическому местоположению(geoIP MaxMind - открытая бд, которая позволяет по IP вычислить физическое местоположения клиента)