#SQL 

## 2PL (2 phase locking)
Состоит из 2 этапов:
1. Фаза расширения - запрашиваются все необходимые для определенной транзакции блокировки и никакие блокировки не высвобождаются
2. Фаза сжатия - все полученные на фазе роста блокировки высвобождаются

Два мьютекса блокируют последовательно строчки таблиц, выполняют операцию и высвобождаются

Может возникнуть дедлок, если две транзакции заблочат мьютексами строчки с которыми обе работают.(1t блочит 2 строчку, 2t блочит 1 строчку, потом 1t пытается обратиться к строке 1, которая заблокирована 2t, которая в свою очередь хочет обратиться к строке 2, заблокированной 1t)

## MVCC (версионная)
у данный есть временные идентификаторы транзакции создавшей запись и транзакции ее удалившей. Если мы видим, что запись уже была удалена, то к этим данным обратиться не получится. Далее все это чистится сборщиком мусора [[Автовакуум - PostgreSQL]]

>Для таких БД операция INSERT быстрее чем UPDATE, так как UPDATE это обновление двух временных индексов

