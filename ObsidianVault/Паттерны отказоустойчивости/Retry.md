#HighLoad

Может возникнуть ситуация когда запрос по тем или иным причинам не дошел до сервиса или сервис не прислал ответ о получении запроса. В этом случае мы можем отправлять запрос повторно(только для запросов не модифицирующих данные). 

Проблема:
- Таймауты и сетевые ошибки
- Временные ошибки сервиса

Решение:
- Повтор с ограничением на кол-во запросов
- Повтор с ограничением на общее время ожидания(клиентский таймаут)
- Время до следующей попытки из HTTP заголовка Retry-After
- Проверка идентификаторов запросов
- Экспоненциальный Retry(запоминать время первого повтора и отсчитывать время до следующего с учетом промежутка времени, прошедшего от 1 повтора) - backoff

[[RetryPattern]]

В методе, который отправляет запрос, ввести переменную на кол-во попыток повторной отправки. Каждый запрос пусть генерирует уникальный идентификатор, чтобы один и тот же запрос не обрабатывался дважды

Если у нас есть N сервисов обращающихся к одному, то лучше сделать смещенный на случайную величину Retry, чтобы избежать ситуации, когда в случае падения этого одного сервиса все N сервисов одновременно будут к нему обращаться!

Нужно найти компромисс между:
- пользовательский запрос - расшибись, но ответь
- лучше ответить ошибкой, чем перегрузкой сервисов
- при неидемпотентных запросах нельзя повторять определенные типы запросов

[[Идемпотентность]]